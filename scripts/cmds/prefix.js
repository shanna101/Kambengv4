const fs = require("fs-extra"); const { utils } = global; module.exports = { config: { name: "prefix", version: "1.0", author: "Ntkang", countDown: 1, role: 0, shortDescription: "prefix", longDescription: "a prefix on bot", category: "box chat", guide: { en: "prefix" } }, langs: { en: { reset: "âœ¨ ğ—šğ—¥ğ—¢ğ—¨ğ—£ ğ—£ğ—¥ğ—˜ğ—™ğ—œğ—« ğ—¥ğ—˜ğ—¦ğ—˜ğ—§ğ—˜ğ——\n\nâª Your prefix has been reset to default: %1", onlyAdmin: "â›” ğ—¡ğ—¢ ğ—£ğ—˜ğ—¥ğ— ğ—œğ—¦ğ—¦ğ—œğ—¢ğ—¡ ğ—”ğ—Ÿğ—Ÿğ—¢ğ—ª\n\nâª Only admin can change prefix of system bot", confirmGlobal: "ğŸ¨ ğ—–ğ—¢ğ—¡ğ—™ğ—œğ—¥ğ—  ğ— ğ—˜ğ—¦ğ—¦ğ—”ğ—šğ—˜ ğ—¥ğ—˜ğ—”ğ—–ğ—§\n\nâª Please react to this message to confirm change prefix of system bot", confirmThisThread: "ğŸ”¶ ğ—–ğ—¢ğ—¡ğ—™ğ—œğ—¥ğ—  ğ— ğ—˜ğ—¦ğ—¦ğ—”ğ—šğ—˜ ğ—¥ğ—˜ğ—”ğ—–ğ—§\n\nâª Please react to this message to confirm change prefix in your box chat", successGlobal: "ğŸ“š ğ—¦ğ—¬ğ—¦ğ—§ğ—˜ğ—  ğ—£ğ—¥ğ—˜ğ—™ğ—œğ—« ğ—–ğ—›ğ—”ğ—¡ğ—šğ—˜ğ——\n\nâª Changed prefix of system bot to: %1", successThisThread: "ğŸ”· ğ—•ğ—¢ğ—« ğ—–ğ—›ğ—”ğ—§ ğ—£ğ—¥ğ—˜ğ—™ğ—œğ—« ğ—–ğ—›ğ—”ğ—¡ğ—šğ—˜ğ——\n\nâª Changed prefix in your box chat to: %1", myPrefix: "ğŸ‘¾ ğ–²ğ—’ğ—Œğ—ğ–¾ğ—† ğ—‰ğ—‹ğ–¾ğ–¿ğ—‚ğ—‘: [ %1 ]\nğŸ¤– ğ–¸ğ—ˆğ—ğ—‹ ğ–»ğ—ˆğ—‘ ğ–¼ğ—ğ–ºğ— ğ—‰ğ—‹ğ–¾ğ–¿ğ—‚ğ—‘: [ %2 ]" } }, onStart: async function ({ message, role, args, commandName, event, threadsData, getLang }) { if (!args[0]) return message.SyntaxError(); if (args[0] === 'reset') { await threadsData.set(event.threadID, null, "data.prefix"); return message.reply(getLang("reset", global.GoatBot.config.prefix)); } const newPrefix = args[0]; const formSet = { commandName, author: event.senderID, newPrefix }; if (args[1] === "-g") { if (role < 2) { return message.reply(getLang("onlyAdmin")); } else { formSet.setGlobal = true; } } else { formSet.setGlobal = false; } return message.reply(args[1] === "-g" ? getLang("confirmGlobal") : getLang("confirmThisThread"), (err, info) => { formSet.messageID = info.messageID; global.GoatBot.onReaction.set(info.messageID, formSet); }); }, onReaction: async function ({ message, threadsData, event, Reaction, getLang }) { const { author, newPrefix, setGlobal } = Reaction; if (event.userID !== author) return; if (setGlobal) { global.GoatBot.config.prefix = newPrefix; fs.writeFileSync(global.client.dirConfig, JSON.stringify(global.GoatBot.config, null, 2)); return message.reply(getLang("successGlobal", newPrefix)); } else { await threadsData.set(event.threadID, newPrefix, "data.prefix"); return message.reply(getLang("successThisThread", newPrefix)); } }, onChat: async function ({ event, message, getLang }) { if (event.body && event.body.toLowerCase() === "prefix") { return () => { return message.reply(getLang("myPrefix", global.GoatBot.config.prefix, utils.getPrefix(event.threadID))); }; } } };